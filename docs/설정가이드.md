# 소확행 설정 가이드

## 1. Cloudinary 설정 (이미지 저장)

### 가입하기
1. https://cloudinary.com 접속
2. "Sign Up Free" 클릭
3. 이메일로 가입 또는 Google 계정으로 가입
4. 이메일 인증 완료

### API 키 받기
1. 로그인 후 Dashboard 접속
2. 왼쪽 메뉴에서 "Settings" → "Access Keys" 클릭
3. 다음 정보 복사해두기:
   - **Cloud Name**: your_cloud_name
   - **API Key**: your_api_key
   - **API Secret**: your_api_secret (Show 클릭해서 확인)

---

## 2. Supabase 설정 (데이터베이스)

### 프로젝트 생성
1. https://supabase.com 접속
2. "Start your project" 클릭
3. GitHub 계정으로 로그인
4. "New Project" 클릭
5. 프로젝트 정보 입력:
   - **Name**: sohwakhang
   - **Database Password**: 강력한 비밀번호 (메모 필수!)
   - **Region**: Northeast Asia (Seoul)
   - **Pricing Plan**: Free
6. "Create new project" 클릭
7. 프로젝트 생성 대기 (약 2분)

### API 키 받기
1. 프로젝트 생성 완료 후
2. 왼쪽 메뉴 Settings → API 클릭
3. 다음 정보 복사:
   - **Project URL**: https://xxxxx.supabase.co
   - **anon public** (API Key): eyJhb...

### 데이터베이스 테이블 생성
1. 왼쪽 메뉴에서 "Table Editor" 클릭
2. "Create a new table" 클릭
3. 다음 SQL을 실행 (SQL Editor 사용):

```sql
-- Users 테이블
CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  username TEXT UNIQUE NOT NULL,
  email TEXT UNIQUE NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- HappinessTypes 테이블
CREATE TABLE happiness_types (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  name TEXT NOT NULL,
  hashtags TEXT[],
  created_by UUID REFERENCES users(id),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Posts 테이블
CREATE TABLE posts (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  happiness_type_id UUID REFERENCES happiness_types(id),
  content TEXT,
  image_url TEXT,
  rating INTEGER CHECK (rating >= 1 AND rating <= 5),
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Likes 테이블
CREATE TABLE likes (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  post_id UUID REFERENCES posts(id) ON DELETE CASCADE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  UNIQUE(user_id, post_id)
);

-- Comments 테이블
CREATE TABLE comments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID REFERENCES users(id) ON DELETE CASCADE,
  post_id UUID REFERENCES posts(id) ON DELETE CASCADE,
  content TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

---

## 3. 환경 변수 설정

프로젝트 루트에 `.env.local` 파일 생성:

```bash
# Cloudinary
NEXT_PUBLIC_CLOUDINARY_CLOUD_NAME=your_cloud_name
CLOUDINARY_API_KEY=your_api_key
CLOUDINARY_API_SECRET=your_api_secret

# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_project_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key
```

**주의**: 위의 `your_xxx` 부분을 실제 받은 키로 교체하세요!

---

## 4. 로컬 개발 서버 실행

```bash
npm run dev
```

http://localhost:3000 에서 확인

---

## 5. Vercel 배포

### 환경 변수 설정
1. Vercel 프로젝트 페이지
2. Settings → Environment Variables
3. 위의 모든 환경 변수 추가 (Production, Preview, Development 모두 체크)
4. Deploy

---

## 무료 플랜 제한

### Cloudinary (무료)
- 저장 용량: 25GB
- 월 대역폭: 25GB
- 월 변환: 25 credits

### Supabase (무료)
- 데이터베이스: 500MB
- 파일 저장소: 1GB
- 월 대역폭: 2GB
- 동시 연결: 60개

---

## 다음 단계

1. Cloudinary 가입 및 API 키 받기
2. Supabase 프로젝트 생성 및 테이블 만들기
3. `.env.local` 파일에 키 입력
4. 개발 서버 재시작
5. 캘린더 페이지 구현 시작!
